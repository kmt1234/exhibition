<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="customerServiceSQL">
 	<!-- 문의하기 -->
 	<insert id="C_Inquire" parameterType="customerService">
 		insert into customerService values(#{email}
		 									,#{classify}
		 									,#{name}
		 									,#{tel}
		 									,#{subject}
		 									,#{content}
		 									,sysdate)
 	</insert>
 	<!-- 이미지작성  -->
	<insert id="imageboardWrite" parameterType="imageboard">
		insert into customerImageboard values(seq_customerImageboard.nextval
											,#{postSelect}
											,#{imageName}
											,#{image1}
											,#{startDate}
											,#{endDate}
											,#{eventLink})
	</insert>
	
	<!-- 총글수 -->
	<select id="getImageboardTotalA" resultType="int">
		select count(*) from customerImageboard
	</select>
	
	<!-- 이미지목록 -->
	<select id="imageboardList" parameterType="java.util.Map" resultType="imageboard">
		select * from(
		select rownum rn, tt.* from(
		select * from customerImageboard order by seq desc)tt
		)where rn <![CDATA[ >= ]]> #{startNum} and rn<![CDATA[<=]]> #{endNum}
	</select>
	
	<!-- 이미지삭제  -->
	<delete id="imageboardDelete" parameterType="java.util.List">
		delete customerImageboard where seq in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</delete>
	
	<select id="getList" parameterType="java.util.List" resultType="imageboard">
		select * from customerImageboard where seq in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</select>

	<!--박람회 정보 넣기-->
	<insert id="eventInfoWrite" parameterType="eventboard">
		insert into eventboard values(seq_eventboard.nextval
						  			  ,#{postSelect}
									  ,#{imageName}
									  ,#{image1}
									  ,#{startDate}
									  ,#{endDate}
									  ,#{eventLink}
									  ,#{startTime}
									  ,#{endTime}
									  ,#{eventPlace}
									  ,#{eventPrice}
									  ,#{eventSeats}
									  ,#{eventRate}
									  ,#{eventContent})
	</insert>

	
	<!--메인 슬라이드 용 이미지 불러오기-->
	<select id="getImageboardSlide" resultType="imageboard">
		select * from customerImageboard order by seq desc
	</select>
	
	<!--박람회 업로드 리스트 가져오기  -->
	<select id="eventboardList" parameterType="java.util.Map" resultType="eventboard">
		select * from(
		select rownum rn, tt.* from(
		select * from eventboard order by seq desc)tt
		)where rn <![CDATA[ >= ]]> #{startNum} and rn<![CDATA[<=]]> #{endNum} and postSelect =1
	</select>
	
	
	<!--연극 업로드 리스트 가져오기  -->
	<select id="eventboardList_play" parameterType="java.util.Map" resultType="eventboard">
		select * from(
		select rownum rn, tt.* from(
		select * from eventboard order by seq desc)tt
		)where rn <![CDATA[ >= ]]> #{startNum} and rn<![CDATA[<=]]> #{endNum} and postSelect =2
	</select>
	
	<!--박람회 업로드 리스트 총 글수 가져오기 -->
	<select id="getEventboardTotalA" resultType="int">
		select count(*) from eventboard where postSelect = 1
	</select>
	
	<!--연극 업로드 리스트 총 글수 가져오기 -->
	<select id="getEventboardTotalA_play" resultType="int">
		select count(*) from eventboard where postSelect = 2
	</select>
	
	<!-- 박람회, 연극 업로드 리스트 삭제   -->
	<delete id="eventboardDelete" parameterType="java.util.List">
		delete eventboard where seq in
		<foreach collection="list" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</delete>
	
	
	
	
	
 </mapper>
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 